<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>폴더폰 게시판</title>
    <style>
        /* 초기화: 회색 칸 방지 및 전체 화면 사용 */
        * { box-sizing: border-box; -webkit-tap-highlight-color: rgba(0,0,0,0); }
        html, body { margin: 0; padding: 0; width: 100%; height: 100%; background: #fff; font-family: sans-serif; }
        
        /* 헤더 */
        .header { background: #3b4890; color: #fff; padding: 15px; text-align: center; font-size: 18px; font-weight: bold; }

        /* 페이지 기본 설정 */
        .page { display: none; width: 100%; padding: 10px; }
        .active { display: block; }

        /* 클릭 가능한 큰 버튼 (링크 방식) */
        .touch-btn {
            display: block; width: 100%; padding: 20px; margin-bottom: 10px;
            background: #3b4890; color: #fff; text-align: center;
            text-decoration: none; font-size: 20px; font-weight: bold;
            border-radius: 5px;
        }
        .touch-btn:active { background: #1a237e; }
        .btn-gray { background: #777; }
        .btn-red { background: #c62828; }

        /* 목록 아이템 (터치 영역 극대화) */
        .list-link {
            display: block; width: 100%; padding: 20px 15px;
            border-bottom: 2px solid #eee; text-decoration: none; color: #000;
        }
        .list-link:active { background: #f5f5f5; }
        .title-text { font-size: 18px; font-weight: bold; display: block; margin-bottom: 5px; }
        .date-text { font-size: 13px; color: #888; }

        /* 입력창 (표준 양식) */
        .input-box {
            width: 100%; padding: 15px; font-size: 18px;
            border: 2px solid #ccc; margin-bottom: 10px;
            display: block; border-radius: 0;
        }
        textarea.input-box { height: 180px; resize: none; }

        /* 상세 보기 */
        .view-box { padding: 5px; }
        .view-t { font-size: 22px; font-weight: bold; border-bottom: 2px solid #3b4890; padding-bottom: 10px; margin-bottom: 15px; }
        .view-c { font-size: 18px; line-height: 1.6; white-space: pre-wrap; word-break: break-all; }
    </style>
</head>
<body>

<div class="header">자유게시판</div>

<div id="listPage" class="page active">
    <a href="javascript:void(0)" class="touch-btn" onclick="goWrite()">[ 새 글 쓰 기 ]</a>
    <div id="listContent"></div>
</div>

<div id="writePage" class="page">
    <input type="text" id="inpTitle" class="input-box" placeholder="제목을 입력하세요">
    <textarea id="inpContent" class="input-box" placeholder="내용을 입력하세요"></textarea>
    <a href="javascript:void(0)" class="touch-btn" onclick="saveData()">저장하기</a>
    <a href="javascript:void(0)" class="touch-btn btn-gray" onclick="goList()">취소</a>
</div>

<div id="viewPage" class="page">
    <div class="view-box" id="viewContent"></div>
    <div style="margin-top:20px;">
        <a href="javascript:void(0)" class="touch-btn btn-gray" onclick="goList()">목록으로</a>
        <a href="javascript:void(0)" id="delBtnLink" class="touch-btn btn-red">삭제하기</a>
    </div>
</div>

<script>
    const KEY = "folder_board_db";

    function getDB() {
        const data = localStorage.getItem(KEY);
        return data ? JSON.parse(data) : [];
    }

    function renderList() {
        const posts = getDB();
        const container = document.getElementById('listContent');
        container.innerHTML = '';

        if(posts.length === 0) {
            container.innerHTML = '<div style="padding:40px; text-align:center; color:#999;">글이 없습니다.</div>';
            return;
        }

        posts.sort((a,b) => b.id - a.id).forEach(p => {
            const a = document.createElement('a');
            a.className = 'list-link';
            a.href = "javascript:void(0)";
            a.onclick = () => goView(p.id);
            a.innerHTML = `<span class="title-text">${p.title}</span><span class="date-text">${p.date}</span>`;
            container.appendChild(a);
        });
    }

    function saveData() {
        const t = document.getElementById('inpTitle').value;
        const c = document.getElementById('inpContent').value;
        if(!t.trim()) { alert("제목 필수!"); return; }

        const posts = getDB();
        posts.push({
            id: Date.now(),
            title: t,
            content: c,
            date: new Date().toLocaleDateString()
        });
        localStorage.setItem(KEY, JSON.stringify(posts));
        
        document.getElementById('inpTitle').value = '';
        document.getElementById('inpContent').value = '';
        goList();
    }

    function goView(id) {
        const posts = getDB();
        const p = posts.find(item => item.id === id);
        if(!p) return;

        document.getElementById('viewContent').innerHTML = `
            <div class="view-t">${p.title}</div>
            <div class="view-c">${p.content}</div>
        `;
        document.getElementById('delBtnLink').onclick = () => deletePost(id);
        showPage('viewPage');
    }

    function deletePost(id) {
        if(!confirm("정말 삭제할까요?")) return;
        let posts = getDB();
        posts = posts.filter(p => p.id !== id);
        localStorage.setItem(KEY, JSON.stringify(posts));
        goList();
    }

    function showPage(id) {
        document.getElementById('listPage').style.display = 'none';
        document.getElementById('writePage').style.display = 'none';
        document.getElementById('viewPage').style.display = 'none';
        document.getElementById(id).style.display = 'block';
        window.scrollTo(0,0);
    }

    function goList() { showPage('listPage'); renderList(); }
    function goWrite() { showPage('writePage'); }

    window.onload = renderList;
</script>

</body>
</html>
